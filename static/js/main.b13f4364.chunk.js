(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[4],{117:function(e,n,t){"use strict";var a=t(0),r=t.n(a);n.a=function(e){return r.a.createElement("div",null,"Oopss ... Not Found")}},204:function(e,n,t){e.exports=t(347)},213:function(e,n,t){},214:function(e,n,t){},331:function(e,n,t){},338:function(e,n,t){},342:function(e,n,t){},343:function(e,n,t){},347:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(14),o=t.n(c),s=t(110),l=t(58),u=t(84),i=t(42),m=t.n(i),f=t(67),p=t(51),d=t(29),g=t(352),b=t(351),h=t(116),E=t(360),v=t(361),y=(t(213),t(41)),w=t(353),j=t(354),k=t(350),O=(t(214),t(62)),x={labelCol:{span:8},wrapperCol:{span:16}},N={wrapperCol:{offset:8,span:16}};var C=function(e){var n=Object(l.b)(),t=Object(d.g)();return r.a.createElement("div",{className:"login-container"},r.a.createElement("div",{className:"login-form-container",style:{border:"1px solid gray"}},r.a.createElement(w.a,{className:"login-form",style:{padding:"15px 27px 15px 0px"}},r.a.createElement("div",{className:"header"},r.a.createElement("img",{src:window.location.origin+"/logo.png",height:"100px",alt:"React Starter"})),r.a.createElement(j.a,Object.assign({},x,{name:"basic",initialValues:{remember:!0},onFinish:function(e){n(Object(O.d)(e.username,e.password)).then((function(){b.b.success("login successfully"),t.push("/")})).catch((function(e){b.b.error("login fail")}))},onFinishFailed:function(e){console.log("Failed:",e)}}),r.a.createElement(j.a.Item,{label:"Username",name:"username",initialValue:"obythelli",rules:[{required:!0,message:"Please input your username!"}]},r.a.createElement(k.a,null)),r.a.createElement(j.a.Item,{label:"Password",name:"password",initialValue:"u7Rg2KBu",rules:[{required:!0,message:"Please input your password!"}]},r.a.createElement(k.a.Password,null)),r.a.createElement(j.a.Item,N,r.a.createElement(h.a,{id:"loginbtn",type:"primary",htmlType:"submit",style:{width:"35%"}},"Submit"),r.a.createElement(h.a,{type:"link",htmlType:"button",className:"login-form-forgot",onClick:function(){t.push("/forgotpassword")},style:{width:"65%"}},"Forgot password?"))))))},P=(t(331),t(97)),I={labelCol:{span:8},wrapperCol:{span:16}},S={wrapperCol:{offset:8,span:16}};var q=function(){var e=Object(d.g)();return r.a.createElement("div",{className:"login-container"},r.a.createElement("div",{style:{width:"33%"}},r.a.createElement(j.a,Object.assign({},I,{name:"basic",initialValues:{remember:!0},onFinish:function(n){Object(P.c)(n.email).then((function(){b.b.success("Successfully! Check your email for more information!",9),e.push("/")})).catch((function(e){b.b.error("Error!"),b.b.error("Tips: Please make sure that you have entered the correct email one!"),console.log(e.message)}))},onFinishFailed:function(e){console.log("Failed:",e)}}),r.a.createElement(j.a.Item,{name:"email",label:"E-mail",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}]},r.a.createElement(k.a,null)),r.a.createElement(j.a.Item,S,r.a.createElement(h.a,{type:"primary",htmlType:"submit"},"Submit")))))};var R=function(e){return r.a.createElement("div",null,r.a.createElement(s.a,null,r.a.createElement("title",null,"Home"),r.a.createElement("meta",{name:"description",content:"A very simple app for the internship program at NP"})),"Home welcome!!")},z=t(117),F=t(186),T=function(e){var n=e.component,t=Object(F.a)(e,["component"]);return r.a.createElement(d.b,Object.assign({},t,{render:function(e){return null!==Object(y.a)()?r.a.createElement(n,e):r.a.createElement(d.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},L=t(349),M=t(355),H=t(356),_=t(357),A=t(358),B=t(359),U=t(73),V=t(75);var D=function(e){var n=Object(l.c)((function(e){return e.app})),t=n.username,a=n.avatar,c=Object(d.h)(),o=Object(V.b)(U.a);return r.a.createElement(L.a,{theme:"dark",mode:"inline",selectedKeys:[c.pathname]},r.a.createElement(L.a.Item,{key:"/user-setting",icon:r.a.createElement(M.a,{style:{marginRight:"0.82em"},icon:r.a.createElement(H.a,null),src:"".concat("https://gdpr-deploy-backend.herokuapp.com/","/api/users/").concat(a)})},r.a.createElement("b",null,"Hi ".concat(t,"!")),r.a.createElement(p.b,{to:"/user-setting"})),o.can("access","manage-user")&&r.a.createElement(L.a.Item,{key:"/user-management",icon:r.a.createElement(H.a,null)},"Manage User",r.a.createElement(p.b,{to:"/user-management"})),o.can("access","manage-request")&&r.a.createElement(L.a.Item,{key:"/request-management",icon:r.a.createElement(_.a,null)},"Manage Request",r.a.createElement(p.b,{to:"/request-management"})),o.can("access","manage-server")&&r.a.createElement(L.a.Item,{key:"/server-management",icon:r.a.createElement(A.a,null)},"Manage Server",r.a.createElement(p.b,{to:"/server-management"})),o.can("access","manage-customer")&&r.a.createElement(L.a.Item,{key:"/customer-management",icon:r.a.createElement(B.a,null)},"Manage Customer",r.a.createElement(p.b,{to:"/customer-management"})))},J=t(348);t(338);var K=function(e){return r.a.createElement("div",{className:"loading-container"},r.a.createElement(J.a,{size:"large"}))},W=t(66),$=t(54),G=t(96);function Q(e){return Object($.c)(Object(W.a)({app:O.a},e))}var X=Object(G.a)({reducer:Q(),devTools:!0});function Y(){return X}var Z=t(39),ee=(t(342),function(e){var n=Object(a.useState)(!0),t=Object(u.a)(n,2),c=t[0],o=t[1],s=Object(a.useState)(!1),l=Object(u.a)(s,2),i=l[0],p=l[1];return Object(a.useEffect)((function(){Object(f.a)(m.a.mark((function n(){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Z.a.get("/api/users/confirm/".concat(e.match.params.verifyToken));case 3:n.sent.data.success?(o(!1),p(!0)):(o(!1),p(!1)),n.next=11;break;case 7:n.prev=7,n.t0=n.catch(0),o(!1),p(!1);case 11:case"end":return n.stop()}}),n,null,[[0,7]])})))()}),[]),c?r.a.createElement(K,null):i?r.a.createElement("div",null,r.a.createElement("div",{className:"swal2-icon swal2-success swal2-animate-success-icon",style:{display:"flex"}},r.a.createElement("div",{className:"swal2-success-circular-line-left",style:{backgroundColor:"rgb(255, 255, 255)"}}),r.a.createElement("span",{className:"swal2-success-line-tip"}),r.a.createElement("span",{className:"swal2-success-line-long"}),r.a.createElement("div",{className:"swal2-success-ring"}),r.a.createElement("div",{className:"swal2-success-fix",style:{backgroundColor:"rgb(255, 255, 255)"}}),r.a.createElement("div",{className:"swal2-success-circular-line-right",style:{backgroundColor:"rgb(255, 255, 255)"}})),r.a.createElement("div",{style:{width:"100%",alignItems:"center",justifyContent:"space-around",display:"flex",flexDirection:"row"}},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row text-center"},r.a.createElement("div",{className:"col-sm-12 col-sm-offset-3"},r.a.createElement("h2",{style:{color:"#0fad00"}},"Success"),r.a.createElement("p",{style:{fontSize:"20px",color:"#5C5C5C"}},"Thank you for verifying the registration. Hope our service will be valued to you."),r.a.createElement("p",{style:{fontSize:"20px",color:"#5C5C5C"}},"Please go back now and login."),r.a.createElement("a",{href:"/login",className:"btn btn-outline-success"},"Log in")))))):r.a.createElement("div",null,r.a.createElement("div",{className:"swal2-icon swal2-error swal2-animate-error-icon",style:{display:"flex"}},r.a.createElement("span",{className:"swal2-x-mark"},r.a.createElement("span",{className:"swal2-x-mark-line-left"}),r.a.createElement("span",{className:"swal2-x-mark-line-right"}))),r.a.createElement("div",{style:{width:"100%",alignItems:"center",justifyContent:"space-around",display:"flex",flexDirection:"row"}},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row text-center"},r.a.createElement("div",{className:"col-sm-12 col-sm-offset-3",style:{alignContent:"center"}},r.a.createElement("h2",{style:{color:"red"}},"Fail"),r.a.createElement("p",{style:{fontSize:"20px",color:"#5C5C5C"}},"Something went wrong, we can not verify your account."),r.a.createElement("p",{style:{fontSize:"20px",color:"#5C5C5C"}},"Please go back now and try again."),r.a.createElement("a",{href:"/login",className:"btn btn-outline-danger"},"Log in"))))))}),ne=Y(),te=g.a.Header,ae=g.a.Content,re=g.a.Sider,ce=r.a.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(10),t.e(13)]).then(t.bind(null,606)).then(function(){var e=Object(f.a)(m.a.mark((function e(n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.e(18).then(t.bind(null,599)).then((function(e){return e.default}));case 2:return a=e.sent,ne.injectReducer("userManagement",a),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())})),oe=r.a.lazy((function(){return Promise.all([t.e(0),t.e(3),t.e(17),t.e(12)]).then(t.bind(null,607)).then(function(){var e=Object(f.a)(m.a.mark((function e(n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.e(19).then(t.bind(null,409)).then((function(e){return e.default}));case 2:return a=e.sent,ne.injectReducer("userSetting",a),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())})),se=r.a.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(2),t.e(7),t.e(11)]).then(t.bind(null,604)).then(function(){var e=Object(f.a)(m.a.mark((function e(n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.e(16).then(t.bind(null,365)).then((function(e){return e.default}));case 2:return a=e.sent,ne.injectReducer("requestManagement",a),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())})),le=r.a.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(2),t.e(3),t.e(9)]).then(t.bind(null,608)).then(function(){var e=Object(f.a)(m.a.mark((function e(n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.e(14).then(t.bind(null,374)).then((function(e){return e.default}));case 2:return a=e.sent,ne.injectReducer("serverManagement",a),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())})),ue=r.a.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(2),t.e(3),t.e(8)]).then(t.bind(null,602)).then(function(){var e=Object(f.a)(m.a.mark((function e(n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.e(15).then(t.bind(null,367)).then((function(e){return e.default}));case 2:return a=e.sent,ne.injectReducer("customerManagement",a),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}));function ie(e){var n=Object(l.b)(),t=(Object(l.c)((function(e){return e.app})).loading,Object(a.useState)(!1)),c=Object(u.a)(t,2),o=c[0],s=c[1],i=Object(V.b)(U.a);Object(a.useEffect)((function(){var e=Object(y.a)(),t=localStorage.getItem("role"),a=localStorage.getItem("userId");e&&n(Object(O.c)({access_token:e,role:t,userId:a})),Object(P.d)().then((function(e){n(Object(O.f)({username:e.data.UserName,avatar:e.data.AvatarPath}))})).catch((function(e){m(),b.b.error(e.data.message)}))}));var m=function(){n(Object(O.e)())};return r.a.createElement("div",{className:"app"},r.a.createElement(a.Suspense,{fallback:r.a.createElement("div",null,"Loading ...")},r.a.createElement(g.a,null,r.a.createElement(re,{style:{minHeight:"100vh"},trigger:null,collapsible:!0,collapsed:o},r.a.createElement(p.b,{to:"/"},r.a.createElement("div",{className:"logo"})),r.a.createElement(D,null)),r.a.createElement(g.a,{className:"site-layout"},r.a.createElement(te,{className:"site-layout-background",style:{padding:0}},r.a.createElement(o?E.a:v.a,{className:"trigger",onClick:function(){return s(!o)}}),r.a.createElement(h.a,{onClick:m,style:{float:"right",margin:14},type:"dashed",danger:!0},"Logout")),r.a.createElement(ae,{className:"site-layout-background",style:{margin:"24px 16px",padding:24,minHeight:280}},r.a.createElement(d.d,null,i.can("access","manage-user")&&r.a.createElement(T,{path:"/user-management",component:ce}),r.a.createElement(T,{path:"/user-setting",component:oe}),i.can("access","manage-request")&&r.a.createElement(T,{path:"/request-management",component:se}),i.can("access","manage-server")&&r.a.createElement(T,{path:"/server-management",component:le}),i.can("access","manage-customer")&&r.a.createElement(T,{path:"/customer-management",component:ue}),r.a.createElement(T,{path:"/",exact:!0,component:R}),r.a.createElement(d.b,{component:z.a})))))))}var me=function(e){var n=Object(l.c)((function(e){return e.app})).loading;return r.a.createElement(a.Suspense,{fallback:r.a.createElement("div",null,"Loading ...")},n&&r.a.createElement(K,null),r.a.createElement(p.a,null,r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/login",component:C}),r.a.createElement(d.b,{exact:!0,path:"/forgotpassword",component:q}),r.a.createElement(d.b,{path:"/confirm/:verifyToken",component:ee}),r.a.createElement(T,{path:"/",component:ie}),r.a.createElement(d.b,{component:z.a}))))};t(343),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var fe=t(136),pe=Y();var de,ge=new fe.a([],{subjectName:function(e){return e&&"string"!==typeof e?e.__type:e}});pe.subscribe((function(){de!==(de=pe.getState().app.role)&&ge.update(function(e){var n=new fe.b,t=n.can,a=n.rules;"admin"===e?(t("access","manage-user"),t("access","manage-request"),t("access","manage-server"),t("access","manage-customer"),t("approve-cancel","request"),t("export","request")):"normal-user"===e?t("access","manage-request"):"dc-member"===e?(t("access","manage-request"),t("access","manage-server"),t("approve-cancel","request"),t("export","request")):"contact-point"===e&&(t("access","manage-customer"),t("access","manage-request"));return a}(de))}));var be=ge;t(344).config(),o.a.render(r.a.createElement(l.a,{store:(X.asyncReducers={},X.injectReducer=function(e,n){X.asyncReducers[e]=n,X.replaceReducer(Q(X.asyncReducers))},X)},r.a.createElement(s.b,null,r.a.createElement(U.a.Provider,{value:be},r.a.createElement(me,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},39:function(e,n,t){"use strict";var a=t(189),r=t.n(a),c=t(41),o=r.a.create({baseURL:"https://gdpr-deploy-backend.herokuapp.com/"});o.interceptors.request.use((function(e){var n=Object(c.a)();return e.headers.Authorization="Bearer "+n,e}),(function(e){return Promise.reject(e)})),o.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)})),n.a=o},41:function(e,n,t){"use strict";function a(){localStorage.clear()}function r(e){c("token",e)}function c(e,n){localStorage.setItem(e,n)}function o(){var e=localStorage.getItem("token");return""!==e?e:null}t.d(n,"b",(function(){return a})),t.d(n,"c",(function(){return r})),t.d(n,"d",(function(){return c})),t.d(n,"a",(function(){return o}))},62:function(e,n,t){"use strict";t.d(n,"c",(function(){return u})),t.d(n,"b",(function(){return m})),t.d(n,"g",(function(){return f})),t.d(n,"f",(function(){return p})),t.d(n,"e",(function(){return d})),t.d(n,"d",(function(){return g}));var a=t(96),r=t(41),c=t(39),o={userInfo:{exp:null,fullName:null,email:null},role:null,token:null,loading:!1,userId:null,username:null,avatar:null},s=Object(a.b)({name:"app",initialState:o,reducers:{login:function(e,n){e.token=n.payload.access_token,e.role=n.payload.role,e.userId=n.payload.userId},logout:function(e,n){e.token=null,e.userInfo=o.userInfo},loading:function(e,n){e.loading=!0},stopLoading:function(e,n){e.loading=!1},setua:function(e,n){e.username=n.payload.username,e.avatar=n.payload.avatar}}}),l=s.actions,u=l.login,i=l.logout,m=l.loading,f=l.stopLoading,p=l.setua,d=(n.a=s.reducer,function(){return function(e){e(m()),Object(r.b)(),e(i()),e(f())}}),g=function(e,n){return function(t){return new Promise((function(a,o){return t(m()),function(e,n){return new Promise((function(t,a){return c.a.post("/auth/login",{username:e,password:n}).then((function(e){t(e.data)})).catch((function(e){a(e)}))}))}(e,n).then((function(e){var n=e.access_token,c=e.role,o=e.userId;t(u({access_token:n,role:c,userId:o})),Object(r.c)(n),Object(r.d)("role",c),Object(r.d)("userId",o),a()})).catch((function(e){o(e)})).finally((function(){t(f())}))}))}}},73:function(e,n,t){"use strict";t.d(n,"a",(function(){return c})),t.d(n,"b",(function(){return o}));var a=t(0),r=t(75),c=Object(a.createContext)(),o=Object(r.a)(c.Consumer)},97:function(e,n,t){"use strict";t.d(n,"e",(function(){return o})),t.d(n,"d",(function(){return s})),t.d(n,"b",(function(){return l})),t.d(n,"f",(function(){return u})),t.d(n,"i",(function(){return i})),t.d(n,"g",(function(){return m})),t.d(n,"h",(function(){return f})),t.d(n,"c",(function(){return p})),t.d(n,"a",(function(){return d}));var a=t(66),r=t(39),c=t(41),o=function(e){return new Promise((function(n,t){var a=Object(c.a)();return console.log("data: ",e),console.log("check token get userAPI",a),r.a.get("/api/users/list",{params:e}).then((function(e){n(e)})).catch((function(e){t(e.response)}))}))},s=function(){return new Promise((function(e,n){var t=Object(c.a)();return console.log("check token get userAPI",t),r.a.get("/api/users/profile").then((function(n){console.log("res",n),e(n)})).catch((function(e){n(e.response)}))}))},l=function(e){return new Promise((function(n,t){return r.a.delete("/api/users/"+e).then((function(e){n(e)})).catch((function(e){t(e.response)}))}))},u=function(e){return new Promise((function(n,t){return r.a.post("/api/users/insert",Object(a.a)({},e)).then((function(e){n(e)})).catch((function(e){t(e.response)}))}))},i=function(e,n){return new Promise((function(t,c){return console.log("id",e),console.log("data",n),r.a.put("/api/users/".concat(e),Object(a.a)({},n)).then((function(e){t(e)})).catch((function(e){c(e.response)}))}))},m=function(e){return new Promise((function(n,t){return console.log("data",e),r.a.put("/api/users/account/update",Object(a.a)({},e)).then((function(e){n(e)})).catch((function(e){t(e.response)}))}))},f=function(e){return new Promise((function(n,t){return console.log("data",e),r.a.put("/api/users/password/update",Object(a.a)({},e)).then((function(e){n(e)})).catch((function(e){t(e.response)}))}))},p=function(e){return new Promise((function(n,t){return r.a.get("/api/users/forgot/".concat(e)).then((function(e){n(e.data)})).catch((function(e){t(e)}))}))},d=function(e){return console.log("data list",e),new Promise((function(n,t){return r.a.put("/api/users",Object(a.a)({},e)).then((function(e){n(e)})).catch((function(e){t(e.response)}))}))}}},[[204,5,6]]]);
//# sourceMappingURL=main.b13f4364.chunk.js.map