(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[4],{102:function(e,n,t){"use strict";t.d(n,"e",(function(){return o})),t.d(n,"d",(function(){return u})),t.d(n,"b",(function(){return s})),t.d(n,"f",(function(){return l})),t.d(n,"i",(function(){return i})),t.d(n,"g",(function(){return m})),t.d(n,"h",(function(){return f})),t.d(n,"c",(function(){return p})),t.d(n,"a",(function(){return d}));var a=t(66),r=t(34),c=t(43),o=function(e){return new Promise((function(n,t){var a=Object(c.a)();return console.log("data: ",e),console.log("check token get userAPI",a),r.a.get("/api/users/list",{params:e}).then((function(e){n(e)})).catch((function(e){t(e.response)}))}))},u=function(){return new Promise((function(e,n){var t=Object(c.a)();return console.log("check token get userAPI",t),r.a.get("/api/users/profile").then((function(n){console.log("res",n),e(n)})).catch((function(e){n(e.response)}))}))},s=function(e){return new Promise((function(n,t){return r.a.delete("/api/users/"+e).then((function(e){n(e)})).catch((function(e){t(e.response)}))}))},l=function(e){return new Promise((function(n,t){return r.a.post("/api/users/insert",Object(a.a)({},e)).then((function(e){n(e)})).catch((function(e){t(e.response)}))}))},i=function(e,n){return new Promise((function(t,c){return console.log("id",e),console.log("data",n),r.a.put("/api/users/".concat(e),Object(a.a)({},n)).then((function(e){t(e)})).catch((function(e){c(e.response)}))}))},m=function(e){return new Promise((function(n,t){return console.log("data",e),r.a.put("/api/users/account/update",Object(a.a)({},e)).then((function(e){n(e)})).catch((function(e){t(e.response)}))}))},f=function(e){return new Promise((function(n,t){return console.log("data",e),r.a.put("/api/users/password/update",Object(a.a)({},e)).then((function(e){n(e)})).catch((function(e){t(e.response)}))}))},p=function(e){return new Promise((function(n,t){return r.a.get("/api/users/forgot/".concat(e)).then((function(e){n(e.data)})).catch((function(e){t(e)}))}))},d=function(e){return console.log("data list",e),new Promise((function(n,t){return r.a.put("/api/users",Object(a.a)({},e)).then((function(e){n(e)})).catch((function(e){t(e.response)}))}))}},128:function(e,n,t){"use strict";var a=t(0),r=t.n(a);n.a=function(e){return r.a.createElement("div",null,"Oopss ... Not Found")}},198:function(e,n,t){"use strict";var a=t(221),r=t.n(a)()("https://gdpr-deploy-backend.herokuapp.com/",{query:{token:localStorage.getItem("token")}});n.a=r},231:function(e,n,t){e.exports=t(406)},240:function(e,n,t){},241:function(e,n,t){},34:function(e,n,t){"use strict";var a=t(142),r=t.n(a),c=t(43),o=r.a.create({baseURL:"https://gdpr-deploy-backend.herokuapp.com/"});o.interceptors.request.use((function(e){var n=Object(c.a)();return e.headers.Authorization="Bearer "+n,e}),(function(e){return Promise.reject(e)})),o.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)})),n.a=o},358:function(e,n,t){},365:function(e,n,t){},369:function(e,n,t){},399:function(e,n){},402:function(e,n,t){},406:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(16),o=t.n(c),u=t(119),s=t(50),l=t(158),i=t(89),m=t(44),f=t.n(m),p=t(68),d=t(30),g=t(42),b=t(413),h=t(411),E=t(408),v=t(409),y=t(417),w=t(72),j=t(422),k=t(423),O=t(424),N=(t(240),t(43)),x=t(414),C=t(415),I=t(410),P=(t(241),t(47)),S={labelCol:{span:8},wrapperCol:{span:16}},q={wrapperCol:{offset:8,span:16}};var R=function(e){var n=Object(s.b)(),t=Object(d.g)();return r.a.createElement("div",{className:"login-container"},r.a.createElement("div",{className:"login-form-container",style:{border:"1px solid gray"}},r.a.createElement(x.a,{className:"login-form",style:{padding:"15px 27px 15px 0px"}},r.a.createElement("div",{className:"header"},r.a.createElement("img",{src:window.location.origin+"/logo.png",height:"100px",alt:"React Starter"})),r.a.createElement(C.a,Object.assign({},S,{name:"basic",initialValues:{remember:!0},onFinish:function(e){n(Object(P.e)(e.username,e.password)).then((function(){h.b.success("login successfully"),t.push("/")})).catch((function(e){h.b.error("login fail")}))},onFinishFailed:function(e){console.log("Failed:",e)}}),r.a.createElement(C.a.Item,{label:"Username",name:"username",initialValue:"obythelli",rules:[{required:!0,message:"Please input your username!"}]},r.a.createElement(I.a,null)),r.a.createElement(C.a.Item,{label:"Password",name:"password",initialValue:"u7Rg2KBu",rules:[{required:!0,message:"Please input your password!"}]},r.a.createElement(I.a.Password,null)),r.a.createElement(C.a.Item,q,r.a.createElement(w.a,{id:"loginbtn",type:"primary",htmlType:"submit",style:{width:"35%"}},"Submit"),r.a.createElement(w.a,{type:"link",htmlType:"button",className:"login-form-forgot",onClick:function(){t.push("/forgotpassword")},style:{width:"65%"}},"Forgot password?"))))))},z=t(412),F=(t(358),t(102)),T={labelCol:{span:8},wrapperCol:{span:16}},L={wrapperCol:{offset:8,span:16}};var M=function(){var e=Object(d.g)();return r.a.createElement("div",{className:"login-container"},r.a.createElement("div",{style:{width:"33%"}},r.a.createElement(C.a,Object.assign({},T,{name:"basic",initialValues:{remember:!0},onFinish:function(n){Object(F.c)(n.email).then((function(){h.b.success("Successfully! Check your email for more information!",9),e.push("/")})).catch((function(e){h.b.error("Error!"),h.b.error("Tips: Please make sure that you have entered the correct email one!"),console.log(e.message)}))},onFinishFailed:function(e){console.log("Failed:",e)}}),r.a.createElement(C.a.Item,{name:"email",label:"E-mail",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}]},r.a.createElement(I.a,null)),r.a.createElement(C.a.Item,L,r.a.createElement(z.a,null,r.a.createElement(w.a,{type:"primary",htmlType:"submit"},"Submit"),r.a.createElement(w.a,{type:"primary",onClick:function(){e.push("/")}},"Return"))))))};var H=function(e){return r.a.createElement("div",null,r.a.createElement(u.a,null,r.a.createElement("title",null,"Home"),r.a.createElement("meta",{name:"description",content:"A very simple app for the internship program at NP"})),"Home welcome!!")},_=t(128),A=t(213),B=function(e){var n=e.component,t=Object(A.a)(e,["component"]);return r.a.createElement(d.b,Object.assign({},t,{render:function(e){return null!==Object(N.a)()?r.a.createElement(n,e):r.a.createElement(d.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},U=t(416),V=t(418),D=t(419),K=t(420),J=t(421),W=t(77),Y=t(79);var $=function(e){var n=Object(s.c)((function(e){return e.app})),t=n.username,a=n.avatar,c=Object(d.h)(),o=Object(Y.b)(W.a);return r.a.createElement(E.a,{theme:"dark",mode:"inline",selectedKeys:[c.pathname]},r.a.createElement(E.a.Item,{key:"/user-setting",icon:r.a.createElement(U.a,{style:{marginRight:"0.82em"},icon:r.a.createElement(V.a,null),src:"".concat("https://gdpr-deploy-backend.herokuapp.com/","/api/users/").concat(a)})},r.a.createElement("b",null,"Hi ".concat(t,"!")),r.a.createElement(g.b,{to:"/user-setting"})),o.can("access","manage-user")&&r.a.createElement(E.a.Item,{key:"/user-management",icon:r.a.createElement(V.a,null)},"Manage User",r.a.createElement(g.b,{to:"/user-management"})),o.can("access","manage-request")&&r.a.createElement(E.a.Item,{key:"/request-management",icon:r.a.createElement(D.a,null)},"Manage Request",r.a.createElement(g.b,{to:"/request-management"})),o.can("access","manage-server")&&r.a.createElement(E.a.Item,{key:"/server-management",icon:r.a.createElement(K.a,null)},"Manage Server",r.a.createElement(g.b,{to:"/server-management"})),o.can("access","manage-customer")&&r.a.createElement(E.a.Item,{key:"/customer-management",icon:r.a.createElement(J.a,null)},"Manage Customer",r.a.createElement(g.b,{to:"/customer-management"})))},G=t(407);t(365);var Q=function(e){return r.a.createElement("div",{className:"loading-container"},r.a.createElement(G.a,{size:"large"}))},X=t(66),Z=t(57),ee=t(101);function ne(e){return Object(Z.c)(Object(X.a)({app:P.a},e))}var te=Object(ee.a)({reducer:ne(),devTools:!0});function ae(){return te}var re=t(34),ce=(t(369),function(e){var n=Object(a.useState)(!0),t=Object(i.a)(n,2),c=t[0],o=t[1],u=Object(a.useState)(!1),s=Object(i.a)(u,2),l=s[0],m=s[1];return Object(a.useEffect)((function(){Object(p.a)(f.a.mark((function n(){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,re.a.get("/api/users/confirm/".concat(e.match.params.verifyToken));case 3:n.sent.data.success?(o(!1),m(!0)):(o(!1),m(!1)),n.next=11;break;case 7:n.prev=7,n.t0=n.catch(0),o(!1),m(!1);case 11:case"end":return n.stop()}}),n,null,[[0,7]])})))()}),[]),c?r.a.createElement(Q,null):l?r.a.createElement("div",null,r.a.createElement("div",{className:"swal2-icon swal2-success swal2-animate-success-icon",style:{display:"flex"}},r.a.createElement("div",{className:"swal2-success-circular-line-left",style:{backgroundColor:"rgb(255, 255, 255)"}}),r.a.createElement("span",{className:"swal2-success-line-tip"}),r.a.createElement("span",{className:"swal2-success-line-long"}),r.a.createElement("div",{className:"swal2-success-ring"}),r.a.createElement("div",{className:"swal2-success-fix",style:{backgroundColor:"rgb(255, 255, 255)"}}),r.a.createElement("div",{className:"swal2-success-circular-line-right",style:{backgroundColor:"rgb(255, 255, 255)"}})),r.a.createElement("div",{style:{width:"100%",alignItems:"center",justifyContent:"space-around",display:"flex",flexDirection:"row"}},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row text-center"},r.a.createElement("div",{className:"col-sm-12 col-sm-offset-3"},r.a.createElement("h2",{style:{color:"#0fad00"}},"Success"),r.a.createElement("p",{style:{fontSize:"20px",color:"#5C5C5C"}},"Thank you for verifying the registration. Hope our service will be valued to you."),r.a.createElement("p",{style:{fontSize:"20px",color:"#5C5C5C"}},"Please go back now and login."),r.a.createElement("a",{href:"/login",className:"btn btn-outline-success"},"Log in")))))):r.a.createElement("div",null,r.a.createElement("div",{className:"swal2-icon swal2-error swal2-animate-error-icon",style:{display:"flex"}},r.a.createElement("span",{className:"swal2-x-mark"},r.a.createElement("span",{className:"swal2-x-mark-line-left"}),r.a.createElement("span",{className:"swal2-x-mark-line-right"}))),r.a.createElement("div",{style:{width:"100%",alignItems:"center",justifyContent:"space-around",display:"flex",flexDirection:"row"}},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row text-center"},r.a.createElement("div",{className:"col-sm-12 col-sm-offset-3",style:{alignContent:"center"}},r.a.createElement("h2",{style:{color:"red"}},"Fail"),r.a.createElement("p",{style:{fontSize:"20px",color:"#5C5C5C"}},"Something went wrong, we can not verify your account."),r.a.createElement("p",{style:{fontSize:"20px",color:"#5C5C5C"}},"Please go back now and try again."),r.a.createElement("a",{href:"/login",className:"btn btn-outline-danger"},"Log in"))))))}),oe=t(198),ue=function(e){var n=Object(s.b)();return r.a.createElement(g.b,{to:e.link,onClick:function(){return t=e.id,void n(Object(P.g)(t));var t}},e.content)},se=ae(),le=b.a.Header,ie=b.a.Content,me=b.a.Sider,fe=r.a.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(10),t.e(13)]).then(t.bind(null,609)).then(function(){var e=Object(p.a)(f.a.mark((function e(n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.e(18).then(t.bind(null,602)).then((function(e){return e.default}));case 2:return a=e.sent,se.injectReducer("userManagement",a),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())})),pe=r.a.lazy((function(){return Promise.all([t.e(0),t.e(2),t.e(17),t.e(12)]).then(t.bind(null,610)).then(function(){var e=Object(p.a)(f.a.mark((function e(n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.e(19).then(t.bind(null,460)).then((function(e){return e.default}));case 2:return a=e.sent,se.injectReducer("userSetting",a),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())})),de=r.a.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(3),t.e(7),t.e(11)]).then(t.bind(null,607)).then(function(){var e=Object(p.a)(f.a.mark((function e(n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.e(16).then(t.bind(null,427)).then((function(e){return e.default}));case 2:return a=e.sent,se.injectReducer("requestManagement",a),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())})),ge=r.a.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(3),t.e(2),t.e(9)]).then(t.bind(null,611)).then(function(){var e=Object(p.a)(f.a.mark((function e(n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.e(14).then(t.bind(null,434)).then((function(e){return e.default}));case 2:return a=e.sent,se.injectReducer("serverManagement",a),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())})),be=r.a.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(3),t.e(2),t.e(8)]).then(t.bind(null,605)).then(function(){var e=Object(p.a)(f.a.mark((function e(n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.e(15).then(t.bind(null,429)).then((function(e){return e.default}));case 2:return a=e.sent,se.injectReducer("customerManagement",a),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}));function he(e){var n=Object(s.b)(),t=Object(s.c)((function(e){return e.app})),c=(t.loading,t.notifications),o=t.userId,u=t.numberNewNotif,m=Object(a.useState)(!1),f=Object(i.a)(m,2),p=f[0],x=f[1],C=Object(Y.b)(W.a),I=Object(d.h)();console.log(c),Object(a.useEffect)((function(){var e=Object(N.a)(),t=localStorage.getItem("role"),a=localStorage.getItem("userId");e&&n(Object(P.d)({access_token:e,role:t,userId:a})),Object(F.d)().then((function(e){n(Object(P.i)({username:e.data.UserName,avatar:e.data.AvatarPath}))})).catch((function(e){S(),h.b.error(e.data.message)}))})),Object(a.useEffect)((function(){n(Object(P.b)())}),[]),oe.a.once(o,(function(e){console.log("here ",e),n(Object(P.h)({notifications:[e].concat(Object(l.a)(c)),numberNewNotif:u+1}))}));var S=function(){n(Object(P.f)())},q=r.a.createElement(E.a,{selectedKeys:[I.pathname],style:{overflowY:"auto",height:"500px"}},c.map((function(e,n){return r.a.createElement(E.a.Item,{key:e.Id},r.a.createElement(ue,{link:e.Link,content:e.Content,id:e.Id}),e.IsRead?r.a.createElement("p",{style:{color:"black"}},"Read"):r.a.createElement("p",{style:{color:"blue"}},"New"),r.a.createElement("p",null,e.CreatedDate))})));return r.a.createElement("div",{className:"app"},r.a.createElement(a.Suspense,{fallback:r.a.createElement("div",null,"Loading ...")},r.a.createElement(b.a,null,r.a.createElement(me,{style:{minHeight:"100vh"},trigger:null,collapsible:!0,collapsed:p},r.a.createElement(g.b,{to:"/"},r.a.createElement("div",{className:"logo"})),r.a.createElement($,null)),r.a.createElement(b.a,{className:"site-layout"},r.a.createElement(le,{className:"site-layout-background",style:{padding:0}},r.a.createElement(p?j.a:k.a,{className:"trigger",onClick:function(){return x(!p)}}),r.a.createElement(v.a,{overlay:q},r.a.createElement(y.a,{count:u},r.a.createElement(O.a,null))),r.a.createElement(w.a,{onClick:S,style:{float:"right",margin:14},type:"dashed",danger:!0},"Logout")),r.a.createElement(ie,{className:"site-layout-background",style:{margin:"24px 16px",padding:24,minHeight:280}},r.a.createElement(d.d,null,C.can("access","manage-user")&&r.a.createElement(B,{path:"/user-management",component:fe}),r.a.createElement(B,{path:"/user-setting",component:pe}),C.can("access","manage-request")&&r.a.createElement(B,{path:"/request-management",component:de}),C.can("access","manage-server")&&r.a.createElement(B,{path:"/server-management",component:ge}),C.can("access","manage-customer")&&r.a.createElement(B,{path:"/customer-management",component:be}),r.a.createElement(B,{path:"/",exact:!0,component:H}),r.a.createElement(d.b,{component:_.a})))))))}var Ee=function(e){var n=Object(s.c)((function(e){return e.app})).loading;return r.a.createElement(a.Suspense,{fallback:r.a.createElement("div",null,"Loading ...")},n&&r.a.createElement(Q,null),r.a.createElement(g.a,null,r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/login",component:R}),r.a.createElement(d.b,{exact:!0,path:"/forgotpassword",component:M}),r.a.createElement(d.b,{path:"/confirm/:verifyToken",component:ce}),r.a.createElement(B,{path:"/",component:he}),r.a.createElement(d.b,{component:_.a}))))};t(402),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ve=t(152),ye=ae();var we,je=new ve.a([],{subjectName:function(e){return e&&"string"!==typeof e?e.__type:e}});ye.subscribe((function(){we!==(we=ye.getState().app.role)&&je.update(function(e){var n=new ve.b,t=n.can,a=n.rules;"admin"===e?(t("access","manage-user"),t("access","manage-request"),t("access","manage-server"),t("access","manage-customer"),t("approve-cancel","request"),t("export","request")):"normal-user"===e?t("access","manage-request"):"dc-member"===e?(t("access","manage-request"),t("access","manage-server"),t("approve-cancel","request"),t("export","request")):"contact-point"===e&&(t("access","manage-customer"),t("access","manage-request"));return a}(we))}));var ke=je;t(403).config(),o.a.render(r.a.createElement(s.a,{store:(te.asyncReducers={},te.injectReducer=function(e,n){te.asyncReducers[e]=n,te.replaceReducer(ne(te.asyncReducers))},te)},r.a.createElement(u.b,null,r.a.createElement(W.a.Provider,{value:ke},r.a.createElement(Ee,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},43:function(e,n,t){"use strict";function a(){localStorage.clear()}function r(e){c("token",e)}function c(e,n){localStorage.setItem(e,n)}function o(){var e=localStorage.getItem("token");return""!==e?e:null}t.d(n,"b",(function(){return a})),t.d(n,"c",(function(){return r})),t.d(n,"d",(function(){return c})),t.d(n,"a",(function(){return o}))},47:function(e,n,t){"use strict";t.d(n,"d",(function(){return l})),t.d(n,"c",(function(){return m})),t.d(n,"j",(function(){return f})),t.d(n,"i",(function(){return p})),t.d(n,"h",(function(){return d})),t.d(n,"f",(function(){return g})),t.d(n,"e",(function(){return b})),t.d(n,"b",(function(){return h})),t.d(n,"g",(function(){return E}));var a=t(101),r=t(43),c=t(34),o=(t(142),{userInfo:{exp:null,fullName:null,email:null},role:null,token:null,loading:!1,userId:null,username:null,avatar:null,notifications:[],numberNewNotif:0}),u=Object(a.b)({name:"app",initialState:o,reducers:{login:function(e,n){e.token=n.payload.access_token,e.role=n.payload.role,e.userId=n.payload.userId},logout:function(e,n){e.token=null,e.userInfo=o.userInfo},loading:function(e,n){e.loading=!0},stopLoading:function(e,n){e.loading=!1},setua:function(e,n){e.username=n.payload.username,e.avatar=n.payload.avatar},setNotification:function(e,n){e.notifications=n.payload.notifications,e.numberNewNotif=n.payload.numberNewNotif}}}),s=u.actions,l=s.login,i=s.logout,m=s.loading,f=s.stopLoading,p=s.setua,d=s.setNotification,g=(n.a=u.reducer,function(){return function(e){e(m()),Object(r.b)(),e(i()),e(f())}}),b=function(e,n){return function(t){return new Promise((function(a,o){return t(m()),function(e,n){return new Promise((function(t,a){return c.a.post("/auth/login",{username:e,password:n}).then((function(e){t(e.data)})).catch((function(e){a(e)}))}))}(e,n).then((function(e){var n=e.access_token,c=e.role,o=e.userId;t(l({access_token:n,role:c,userId:o})),Object(r.c)(n),Object(r.d)("role",c),Object(r.d)("userId",o),a()})).catch((function(e){o(e)})).finally((function(){t(f())}))}))}},h=function(){return function(e){return new Promise((function(n,t){return new Promise((function(e,n){return c.a.get("/notifications").then((function(n){e(n)})).catch((function(e){n(e)}))})).then((function(t){e(d({notifications:t.data,numberNewNotif:t.data.length>0?t.data[0].TotalNew:0})),n()})).catch((function(e){t(e)}))}))}},E=function(e){return function(n){return new Promise((function(t,a){return function(e){return new Promise((function(n,t){return c.a.put("/notifications/read-notification/".concat(e)).then((function(e){n()})).catch((function(e){t(e)}))}))}(e).then((function(e){n(h()),t()})).catch((function(e){a(e)}))}))}}},77:function(e,n,t){"use strict";t.d(n,"a",(function(){return c})),t.d(n,"b",(function(){return o}));var a=t(0),r=t(79),c=Object(a.createContext)(),o=Object(r.a)(c.Consumer)}},[[231,5,6]]]);
//# sourceMappingURL=main.c17a38e8.chunk.js.map