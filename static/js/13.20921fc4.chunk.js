(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[13],{445:function(e,a,t){},447:function(e,a,t){},606:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(29),s=(t(445),t(117)),c=t(42),o=t.n(c),i=t(446),m=t(67),u=t(84),d=t(591),b=t(350),p=t(351),f=t(593),E=t(406),h=t(116),v=t(349),g=t(83),O=t(57),j=t(440),w=t(601),S=t(438),I=t(443),x=t(609),y=t(610),P=t(444),C=(t(447),t(66)),A=t(97),k=(t(375),t(403)),F=t(598),T=t(354),N=t(99),R=t(605),M=t(594),U=(k.a.Option,F.a.Option,[{value:"admin",label:"admin"},{value:"normal-user",label:"normal-user"},{value:"contact-point",label:"contact-point"},{value:"dc-member",label:"dc-member"}]),z={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},q=function(e){var a=e.visible,t=e.onCreate,n=e.onCancel,l=T.a.useForm(),s=Object(u.a)(l,1)[0];return r.a.createElement(d.a,{visible:a,title:"Create a new user",okText:"Create",cancelText:"Cancel",onCancel:n,onOk:function(){s.validateFields().then((function(e){s.resetFields(),t(e)})).catch((function(e){console.log("Validate Failed:",e)}))}},r.a.createElement(T.a,Object.assign({},z,{form:s,name:"register",onFinish:function(e){console.log("Received values of form: ",e)},initialValues:{role:[],prefix:"86"},scrollToFirstError:!0}),r.a.createElement(T.a.Item,{name:"email",label:"E-mail",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}]},r.a.createElement(b.a,null)),r.a.createElement(T.a.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please input your password!"},{min:5,message:"Password must be minimum 5 characters."},{pattern:"(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])",message:"Password must include number, uppercase and lowercase character"}],hasFeedback:!0},r.a.createElement(b.a.Password,null)),r.a.createElement(T.a.Item,{name:"confirm",label:"Confirm Password",dependencies:["password"],hasFeedback:!0,rules:[{min:5,message:"Password must be minimum 5 characters."},{pattern:"(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])",message:"Password must include number, uppercase and lowercase character"},{required:!0,message:"Please confirm your password!"},function(e){var a=e.getFieldValue;return{validator:function(e,t){return t&&a("password")!==t?Promise.reject("The two passwords that you entered do not match!"):Promise.resolve()}}}]},r.a.createElement(b.a.Password,null)),r.a.createElement(T.a.Item,{name:"username",label:r.a.createElement("span",null,"Username\xa0",r.a.createElement(N.a,{title:"What do you want others to call you?"},r.a.createElement(M.a,null))),rules:[{required:!0,message:"Please input your username!",whitespace:!0},{min:5,message:"Username must be minimum 5 characters."},{pattern:"(?=[0-9a-zA-Z](.*))",message:"Username must not null"}]},r.a.createElement(b.a,null)),r.a.createElement(T.a.Item,{name:"rolelist",label:"Role permission",rules:[{type:"array",required:!0,message:"Please select role!"}]},r.a.createElement(R.a,{options:U})),r.a.createElement(T.a.Item,{name:"firstname",label:"First Name",rules:[{required:!0,message:"Please input Firstname!"},{pattern:"(?=[0-9a-zA-Z](.*))",message:"Firstname must not null"}]},r.a.createElement(b.a,null)),r.a.createElement(T.a.Item,{name:"lastname",label:"Last Name",rules:[{required:!0,message:"Please input Lastname!"},{pattern:"(?=[0-9a-zA-Z](.*))",message:"Lastname must not null"}]},r.a.createElement(b.a,null))))},L=function(e){var a=Object(n.useState)(!1),t=Object(u.a)(a,2),l=t[0],s=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{type:"primary",onClick:function(){s(!0)}},"Create New User"),r.a.createElement(q,{visible:l,onCreate:function(a){console.log("Received values of form: ",a),Object(A.f)(Object(C.a)(Object(C.a)({},a),{},{role:a.rolelist[0],firstname:a.firstname.trim(),lastname:a.lastname.trim(),username:a.username.trim()})).then((function(a){console.log("res from insert",a),201===a.status&&p.b.success(a.statusText),e.onSubmitModal()})).catch((function(e){p.b.error(e.data.message)})),e.onSubmitModal(),s(!1)},onCancel:function(){s(!1)}}))},D=t(442),Z=(k.a.Option,F.a.Option,[{value:"admin",label:"admin"},{value:"normal-user",label:"normal-user"},{value:"contact-point",label:"contact-point"},{value:"dc-member",label:"dc-member"}]),V={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},B=function(e){var a=e.visible,t=e.onCreate,l=e.onCancel,s=e.record,c=e.switchState,o=e.setSwitchState,i=T.a.useForm(),m=Object(u.a)(i,1)[0];Object(n.useEffect)((function(){o(s.IsActive)}),[s]);var p=Object(n.useState)([]),f=Object(u.a)(p,2);f[0],f[1];return r.a.createElement(d.a,{visible:a,title:"Update User",okText:"Update",cancelText:"Cancel",onCancel:l,onOk:function(){m.validateFields().then((function(e){m.resetFields(),t(e)})).catch((function(e){console.log("Validate Failed:",e)}))}},r.a.createElement(T.a,Object.assign({},V,{form:m,name:"register",onFinish:function(e){console.log("Received values of form: ",Object(C.a)(Object(C.a)({},e),{},{switchState:c}))},initialValues:{email:s.Email,firstname:s.FirstName,lastname:s.LastName,username:s.UserName,rolelist:[s.RoleName],prefix:"86"},scrollToFirstError:!0}),r.a.createElement(T.a.Item,{name:"email",label:"E-mail",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}]},r.a.createElement(b.a,{disabled:!0})),r.a.createElement(T.a.Item,{name:"password",label:"Password",rules:[{min:5,message:"Password must be minimum 5 characters."},{pattern:"(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])",message:"Password must include number, uppercase and lowercase character"}],hasFeedback:!0},r.a.createElement(b.a.Password,null)),r.a.createElement(T.a.Item,{name:"confirm",label:"Confirm Password",dependencies:["password"],hasFeedback:!0,rules:[{min:5,message:"Password must be minimum 5 characters."},{pattern:"(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])",message:"Password must include number, uppercase and lowercase character"},function(e){var a=e.getFieldValue;return{validator:function(e,t){return t&&a("password")!==t?Promise.reject("The two passwords that you entered do not match!"):Promise.resolve()}}}]},r.a.createElement(b.a.Password,null)),r.a.createElement(T.a.Item,{name:"username",label:r.a.createElement("span",null,"Username\xa0",r.a.createElement(N.a,{title:"What do you want others to call you?"},r.a.createElement(M.a,null))),rules:[{required:!0,message:"Please input your username!",whitespace:!0}]},r.a.createElement(b.a,{disabled:!0})),r.a.createElement(T.a.Item,{name:"rolelist",label:"Role permission",rules:[{type:"array",required:!0,message:"Please select role!"}]},r.a.createElement(R.a,{options:Z})),r.a.createElement(T.a.Item,{name:"firstname",label:"First Name",rules:[{required:!0,message:"Please input Firstname!"},{pattern:"(?=[0-9a-zA-Z](.*))",message:"Firstname must not null"}]},r.a.createElement(b.a,null)),r.a.createElement(T.a.Item,{name:"lastname",label:"Last Name",rules:[{required:!0,message:"Please input Lastname!"},{pattern:"(?=[0-9a-zA-Z](.*))",message:"Lastname must not null"}]},r.a.createElement(b.a,null)),r.a.createElement(T.a.Item,{name:"isactive",label:"Status"},r.a.createElement(D.a,{checkedChildren:"Active",unCheckedChildren:"InActive",checked:c,onChange:function(e){console.log("switch to ".concat(e)),o(e)}}))))},K=function(e){var a=Object(n.useState)(e.record.IsActive),t=Object(u.a)(a,2),l=t[0],s=t[1],c=Object(n.useState)(!1),o=Object(u.a)(c,2),i=o[0],m=o[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{type:"primary",onClick:function(){m(!0)}},"Edit"),r.a.createElement(B,{visible:i,onCreate:function(a){console.log("Received values of form: ",Object(C.a)(Object(C.a)({},a),{},{IsActive:l})),Object(A.i)(e.record.Id,Object(C.a)(Object(C.a)({},a),{},{role:a.rolelist[0],IsActive:l})).then((function(a){200===a.status&&p.b.success(a.statusText),e.onSubmitModal()})).catch((function(e){l||s(!l),p.b.error(e.data.message)})),m(!1)},onCancel:function(){m(!1)},record:e.record,switchState:l,setSwitchState:s}))},J=t(58),W=d.a.confirm,Q=b.a.Search;var G=function(){var e=Object(n.useState)([]),a=Object(u.a)(e,2),t=a[0],l=a[1],s=[{title:"FirstName",dataIndex:"FirstName",sorter:!0},{title:"LastName",dataIndex:"LastName",sorter:!0},{title:"Email",dataIndex:"Email",sorter:!0},{title:"Username",dataIndex:"UserName",sorter:!0},{title:"Role",dataIndex:"RoleName",filters:[{text:"admin",value:"admin"},{text:"normal-user",value:"normal-user"},{text:"dc-member",value:"dc-member"},{text:"contact-point",value:"contact-point"}],render:function(e){return"admin"===e?r.a.createElement(f.a,{color:"green"},"ADMIN"):"normal-user"===e?r.a.createElement(f.a,{color:"blue"},"NORMAL USER"):"dc-member"===e?r.a.createElement(f.a,{color:"red"},"DC-MEMBER"):r.a.createElement(f.a,{color:"orange"},"CONTACT POINT")}},{title:"IsActive",dataIndex:"IsActive",key:"IsActive",filterMultiple:!1,filters:[{text:"Active",value:!0},{text:"InActive",value:!1}],render:function(e){return e?r.a.createElement(f.a,{color:"green"},"Active"):r.a.createElement(f.a,{color:"red"},"InActive")}},{title:"UpdatedDate",dataIndex:"UpdatedDate",sorter:!0},{title:"Action",key:"action",render:function(e,a){return r.a.createElement(E.a,{size:"middle"},r.a.createElement(K,{record:a,onSubmitModal:we}),r.a.createElement(h.a,{type:"primary",danger:!0,onClick:function(){var e;W({title:"Do you want to delete user "+(e=a).UserName,icon:r.a.createElement(I.a,null),content:"Warning: The delete user cannot be recover",onOk:function(){return new Promise((function(a,t){Object(A.b)(e.Id).then((function(e){200===e.status||p.b.error(e.statusText)})).catch((function(e){p.b.error(e.data.message)})),setTimeout(Math.random()>.5?a:t,200)})).catch((function(){return console.log("Oops errors!")})).then((function(){we()}))},onCancel:function(){}})}},"Delete"))}}];function c(){return(c=Object(m.a)(o.a.mark((function e(a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("click",a),"active"!=a.key){e.next=8;break}return p.b.warning("Active all selected items"),e.next=5,Object(A.a)({listid:t.join(","),isactive:1}).then((function(e){200===e.status?p.b.success(e.statusText):p.b.error(e.statusText)})).catch((function(e){p.b.error(e.data.message)}));case 5:we(),e.next=13;break;case 8:if("deactive"!=a.key){e.next=13;break}return p.b.warning("Deactive all selected items"),e.next=12,Object(A.a)({listid:t.join(","),isactive:0}).then((function(e){200===e.status?p.b.success(e.statusText):p.b.error(e.statusText)})).catch((function(e){p.b.error("Oops, error!")}));case 12:we();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var d=r.a.createElement(v.a,{onClick:function(e){return c.apply(this,arguments)}},r.a.createElement(v.a.Item,{key:"active",icon:r.a.createElement(x.a,null)},"Active all selected items"),r.a.createElement(v.a.Item,{key:"deactive",icon:r.a.createElement(y.a,null)},"Deactive all selected items")),b=Object(n.useState)(""),C=Object(u.a)(b,2),k=C[0],F=C[1],T=Object(n.useState)(""),N=Object(u.a)(T,2),R=N[0],M=N[1],U=Object(n.useState)("ascend"),z=Object(u.a)(U,2),q=z[0],D=z[1],Z=Object(n.useState)(""),V=Object(u.a)(Z,2),B=V[0],G=V[1],H=Object(n.useState)(void 0),X=Object(u.a)(H,2),Y=X[0],$=X[1],_=Object(n.useState)(1),ee=Object(u.a)(_,2),ae=ee[0],te=ee[1],ne=Object(n.useState)(10),re=Object(u.a)(ne,2),le=re[0],se=re[1],ce=(Object(J.b)(),Object(n.useState)([])),oe=Object(u.a)(ce,2),ie=(oe[0],oe[1],Object(n.useState)([])),me=Object(u.a)(ie,2),ue=me[0],de=me[1],be=Object(n.useState)(),pe=Object(u.a)(be,2),fe=pe[0],Ee=pe[1],he=Object(n.useState)(!1),ve=Object(u.a)(he,2),ge=ve[0],Oe=ve[1],je=Object(J.c)((function(e){return e.userManagement}));function we(){Ie({PageNo:ae,PageSize:le,SearchKey:k,SortBy:R,SortOrder:q,Role:B,IsActive:Y})}function Se(e){return"Total ".concat(e," items")}Object(i.a)(je),Object(n.useEffect)((function(){console.log("useeffect"),Ie({PageNo:ae,PageSize:le,SearchKey:k,SortBy:R,SortOrder:q,Role:B,IsActive:Y})}),[ae,le,k,R,q,B,Y]);var Ie=function(e){return Oe(!0),Object(A.e)(e).then((function(e){Oe(!1),de(e.data),200===e.status||p.b.error(e.statusText),0!==e.data.length?Ee(e.data[0].TotalItem):Ee(0),Se({total:fe})})).catch((function(e){p.b.error(e.data.message)}))},xe={selectedRowKeys:t,onChange:function(e){console.log("selectedRowKeys changed: ",e),l(e)}},ye=t.length>0;return r.a.createElement("div",null,r.a.createElement(g.a,null,r.a.createElement(O.a,{span:8},r.a.createElement(L,{onSubmitModal:we})),r.a.createElement(O.a,{span:8}),r.a.createElement(O.a,{span:8},r.a.createElement(Q,{placeholder:"input search text",onSearch:function(e){return a=e,l([]),F(a.trim()),void te(1);var a},enterButton:!0,autoFocus:!0}))),r.a.createElement(g.a,{style:{marginBottom:"10px",marginTop:"10px"}},r.a.createElement(j.a,{overlay:d,disabled:!ye},r.a.createElement(h.a,null,"Multi actions ",r.a.createElement(P.a,null))),r.a.createElement("span",{style:{marginLeft:8}},ye?"Selected ".concat(t.length," items"):"")),r.a.createElement(w.a,{columns:s,rowKey:function(e){return e.Id},dataSource:ue,pagination:!1,loading:ge,rowSelection:xe,onChange:function(e,a,t){console.log("filter",a),0!==t.length&&(l([]),M(t.field),D(t.order)),null!==a.RoleName?(l([]),G(a.RoleName.join(",")),te(1)):G(""),null!==a.IsActive?(l([]),$(a.IsActive[0]),te(1)):$(void 0)},scroll:{x:1500}}),r.a.createElement("br",null),r.a.createElement(g.a,null,r.a.createElement(O.a,{span:12,offset:6},r.a.createElement(S.a,{showQuickJumper:!0,showSizeChanger:!0,onChange:function(e,a){a!==le&&ae>Math.ceil(fe/a)?(console.log("Total1",fe),se(a),0!==Math.ceil(fe/a)?te(Math.ceil(fe/a)):te(1)):(console.log("Total2",fe),se(a),te(e))},current:ae,total:fe,showTotal:Se,pageSize:le}))),r.a.createElement("br",null))};var H=function(e){return r.a.createElement("div",null,"User Detail Page")},X=t(73),Y=t(75);a.default=function(){var e=Object(Y.b)(X.a);console.log(e.can("access","manage-user"));var a=Object(l.i)();return r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Loading ...")},r.a.createElement(l.d,null,r.a.createElement(l.b,{exact:!0,path:a.url,component:G}),r.a.createElement(l.b,{exact:!0,path:"".concat(a.url,"/:userId"),component:H}),r.a.createElement(l.b,{component:s.a})))}}}]);
//# sourceMappingURL=13.20921fc4.chunk.js.map